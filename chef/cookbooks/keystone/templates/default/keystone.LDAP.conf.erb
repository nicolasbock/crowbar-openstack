[identity]
driver = ldap

[ldap]

#
# From keystone
#

# URL(s) for connecting to the LDAP server. Multiple LDAP URLs may be specified
# as a comma separated string. The first URL to successfully bind is used for
# the connection. (string value)
#url = ldap://localhost
url = <%= node[:keystone][:ldap][:url] %>

# User BindDN to query the LDAP server. (string value)
#user = <None>
user = <%= node[:keystone][:ldap][:user] %>

# Password for the BindDN to query the LDAP server. (string value)
#password = <None>
password = <%= node[:keystone][:ldap][:password] %>

# LDAP server suffix (string value)
#suffix = cn=example,cn=com
suffix = <%= node[:keystone][:ldap][:suffix] %>

# If true, will add a dummy member to groups. This is required if the
# objectclass for groups requires the "member" attribute. (boolean value)
#use_dumb_member = false
use_dumb_member = <%= node[:keystone][:ldap][:use_dumb_member] %>

# DN of the "dummy member" to use when "use_dumb_member" is enabled. (string
# value)
#dumb_member = cn=dumb,dc=nonexistent
dumb_member = <%= node[:keystone][:ldap][:dumb_member] %>

# Delete subtrees using the subtree delete control. Only enable this option if
# your LDAP server supports subtree deletion. (boolean value)
#allow_subtree_delete = false
allow_subtree_delete = <%= node[:keystone][:ldap][:allow_subtree_delete] %>

# The LDAP scope for queries, "one" represents oneLevel/singleLevel and "sub"
# represents subtree/wholeSubtree options. (string value)
# Allowed values: one, sub
#query_scope = one
query_scope = <%= node[:keystone][:ldap][:query_scope] %>

# Maximum results per page; a value of zero ("0") disables paging. (integer
# value)
#page_size = 0
page_size = <%= node[:keystone][:ldap][:page_size] %>

# The LDAP dereferencing option for queries. The "default" option falls back to
# using default dereferencing configured by your ldap.conf. (string value)
# Allowed values: never, searching, always, finding, default
#alias_dereferencing = default
alias_dereferencing = <%= node[:keystone][:ldap][:alias_dereferencing] %>

# Sets the LDAP debugging level for LDAP calls. A value of 0 means that
# debugging is not enabled. This value is a bitmask, consult your LDAP
# documentation for possible values. (integer value)
#debug_level = <None>

# Override the system's default referral chasing behavior for queries. (boolean
# value)
#chase_referrals = <None>

# Search base for users. Defaults to the suffix value. (string value)
#user_tree_dn = <None>
user_tree_dn = <%= node[:keystone][:ldap][:user_tree_dn] %>

# LDAP search filter for users. (string value)
#user_filter = <None>
user_filter = <%= node[:keystone][:ldap][:user_filter] %>

# LDAP objectclass for users. (string value)
#user_objectclass = inetOrgPerson
user_objectclass = <%= node[:keystone][:ldap][:user_objectclass] %>

# LDAP attribute mapped to user id. WARNING: must not be a multivalued
# attribute. (string value)
#user_id_attribute = cn
user_id_attribute = <%= node[:keystone][:ldap][:user_id_attribute] %>

# LDAP attribute mapped to user name. (string value)
#user_name_attribute = sn
user_name_attribute = <%= node[:keystone][:ldap][:user_name_attribute] %>

# LDAP attribute mapped to user description. (string value)
# user_description_attribute = description
user_description_attribute = <%= node[:keystone][:ldap][:user_description_attribute] %>

# LDAP attribute mapped to user email. (string value)
#user_mail_attribute = mail
user_mail_attribute = <%= node[:keystone][:ldap][:user_mail_attribute] %>

# LDAP attribute mapped to password. (string value)
#user_pass_attribute = userPassword
user_pass_attribute = <%= node[:keystone][:ldap][:user_pass_attribute] %>

# LDAP attribute mapped to user enabled flag. (string value)
#user_enabled_attribute = enabled
user_enabled_attribute = <%= node[:keystone][:ldap][:user_enabled_attribute] %>

# Invert the meaning of the boolean enabled values. Some LDAP servers use a
# boolean lock attribute where "true" means an account is disabled. Setting
# "user_enabled_invert = true" will allow these lock attributes to be used.
# This setting will have no effect if "user_enabled_mask" or
# "user_enabled_emulation" settings are in use. (boolean value)
#user_enabled_invert = false
user_enabled_invert = <%= node[:keystone][:ldap][:user_enabled_invert] %>

# Bitmask integer to indicate the bit that the enabled value is stored in if
# the LDAP server represents "enabled" as a bit on an integer rather than a
# boolean. A value of "0" indicates the mask is not used. If this is not set to
# "0" the typical value is "2". This is typically used when
# "user_enabled_attribute = userAccountControl". (integer value)
#user_enabled_mask = 0
user_enabled_mask = <%= node[:keystone][:ldap][:user_enabled_mask] %>

# Default value to enable users. This should match an appropriate int value if
# the LDAP server uses non-boolean (bitmask) values to indicate if a user is
# enabled or disabled. If this is not set to "True" the typical value is "512".
# This is typically used when "user_enabled_attribute = userAccountControl".
# (string value)
#user_enabled_default = True
user_enabled_default = <%= node[:keystone][:ldap][:user_enabled_default] %>

# List of attributes stripped off the user on update. (list value)
#user_attribute_ignore = default_project_id
user_attribute_ignore = <%= node[:keystone][:ldap][:user_attribute_ignore] %>

# LDAP attribute mapped to default_project_id for users. (string value)
#user_default_project_id_attribute = <None>
user_default_project_id_attribute = <%= node[:keystone][:ldap][:user_default_project_id_attribute] %>

# Allow user creation in LDAP backend. (boolean value)
# This option is deprecated for removal.
# Its value may be silently ignored in the future.
# Reason: Write support for Identity LDAP backends has been deprecated in the M
# release and will be removed in the O release.
#user_allow_create = true
user_allow_create = <%= node[:keystone][:ldap][:user_allow_create] %>

# Allow user updates in LDAP backend. (boolean value)
# This option is deprecated for removal.
# Its value may be silently ignored in the future.
# Reason: Write support for Identity LDAP backends has been deprecated in the M
# release and will be removed in the O release.
#user_allow_update = true
user_allow_update = <%= node[:keystone][:ldap][:user_allow_update] %>

# Allow user deletion in LDAP backend. (boolean value)
# This option is deprecated for removal.
# Its value may be silently ignored in the future.
# Reason: Write support for Identity LDAP backends has been deprecated in the M
# release and will be removed in the O release.
#user_allow_delete = true
user_allow_delete = <%= node[:keystone][:ldap][:user_allow_delete] %>

# If true, Keystone uses an alternative method to determine if a user is
# enabled or not by checking if they are a member of the
# "user_enabled_emulation_dn" group. (boolean value)
#user_enabled_emulation = false
user_enabled_emulation = <%= node[:keystone][:ldap][:user_enabled_emulation] %>

# DN of the group entry to hold enabled users when using enabled emulation.
# (string value)
#user_enabled_emulation_dn = <None>
user_enabled_emulation_dn = <%= node[:keystone][:ldap][:user_enabled_emulation_dn] %>

# Use the "group_member_attribute" and "group_objectclass" settings to
# determine membership in the emulated enabled group. (boolean value)
#user_enabled_emulation_use_group_config = false
user_enabled_emulation_use_group_config = <%= node[:keystone][:ldap][:user_enabled_emulation_use_group_config] %>

# List of additional LDAP attributes used for mapping additional attribute
# mappings for users. Attribute mapping format is <ldap_attr>:<user_attr>,
# where ldap_attr is the attribute in the LDAP entry and user_attr is the
# Identity API attribute. (list value)
#user_additional_attribute_mapping =

# Search base for groups. Defaults to the suffix value. (string value)
#group_tree_dn = <None>
group_tree_dn = <%= node[:keystone][:ldap][:group_tree_dn] %>

# LDAP search filter for groups. (string value)
#group_filter = <None>
group_filter = <%= node[:keystone][:ldap][:group_filter] %>

# LDAP objectclass for groups. (string value)
#group_objectclass = groupOfNames
group_objectclass = <%= node[:keystone][:ldap][:group_objectclass] %>

# LDAP attribute mapped to group id. (string value)
#group_id_attribute = cn
group_id_attribute = <%= node[:keystone][:ldap][:group_id_attribute] %>

# LDAP attribute mapped to group name. (string value)
#group_name_attribute = ou
group_name_attribute = <%= node[:keystone][:ldap][:group_name_attribute]%>

# LDAP attribute mapped to show group membership. (string value)
#group_member_attribute = member
group_member_attribute = <%= node[:keystone][:ldap][:group_member_attribute] %>

# If the members of the group objectclass are user IDs rather than DNs, set
# this to true. This is the case when using posixGroup as the group objectclass
# and OpenDirectory. (boolean value)
#group_members_are_ids = false
group_members_are_ids = <%= node[:keystone][:ldap][:group_members_are_ids] %>

# LDAP attribute mapped to group description. (string value)
#group_desc_attribute = description
group_desc_attribute = <%= node[:keystone][:ldap][:group_desc_attribute] %>

# List of attributes stripped off the group on update. (list value)
#group_attribute_ignore =
group_attribute_ignore = <%= node[:keystone][:ldap][:group_attribute_ignore] %>

# Allow group creation in LDAP backend. (boolean value)
# This option is deprecated for removal.
# Its value may be silently ignored in the future.
# Reason: Write support for Identity LDAP backends has been deprecated in the M
# release and will be removed in the O release.
#group_allow_create = true
group_allow_create = <%= node[:keystone][:ldap][:group_allow_create] %>

# Allow group update in LDAP backend. (boolean value)
# This option is deprecated for removal.
# Its value may be silently ignored in the future.
# Reason: Write support for Identity LDAP backends has been deprecated in the M
# release and will be removed in the O release.
#group_allow_update = true
group_allow_update = <%= node[:keystone][:ldap][:group_allow_update] %>

# Allow group deletion in LDAP backend. (boolean value)
# This option is deprecated for removal.
# Its value may be silently ignored in the future.
# Reason: Write support for Identity LDAP backends has been deprecated in the M
# release and will be removed in the O release.
#group_allow_delete = true
group_allow_delete = <%= node[:keystone][:ldap][:group_allow_delete] %>

# Additional attribute mappings for groups. Attribute mapping format is
# <ldap_attr>:<user_attr>, where ldap_attr is the attribute in the LDAP entry
# and user_attr is the Identity API attribute. (list value)
#group_additional_attribute_mapping =

# CA certificate file path for communicating with LDAP servers. (string value)
#tls_cacertfile = <None>
tls_cacertfile = <%= node[:keystone][:ldap][:tls_cacertfile] %>

# CA certificate directory path for communicating with LDAP servers. (string
# value)
#tls_cacertdir = <None>
tls_cacertdir = <%= node[:keystone][:ldap][:tls_cacertdir] %>

# Enable TLS for communicating with LDAP servers. (boolean value)
#use_tls = false
use_tls = <%= node[:keystone][:ldap][:use_tls] %>

# Specifies what checks to perform on client certificates in an incoming TLS
# session. (string value)
# Allowed values: demand, never, allow
#tls_req_cert = demand
tls_req_cert = <%= node[:keystone][:ldap][:tls_req_cert] %>

# Enable LDAP connection pooling. (boolean value)
#use_pool = true
use_pool = <%= node[:keystone][:ldap][:use_pool] %>

# Connection pool size. (integer value)
#pool_size = 10

# Maximum count of reconnect trials. (integer value)
#pool_retry_max = 3

# Time span in seconds to wait between two reconnect trials. (floating point
# value)
#pool_retry_delay = 0.1

# Connector timeout in seconds. Value -1 indicates indefinite wait for
# response. (integer value)
#pool_connection_timeout = -1

# Connection lifetime in seconds. (integer value)
#pool_connection_lifetime = 600

# Enable LDAP connection pooling for end user authentication. If use_pool is
# disabled, then this setting is meaningless and is not used at all. (boolean
# value)
#use_auth_pool = true

# End user auth connection pool size. (integer value)
#auth_pool_size = 100

# End user auth connection lifetime in seconds. (integer value)
#auth_pool_connection_lifetime = 60
